<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.43">

  <title>Data Engineering Guides ‚Äì üë®üèæ‚ÄçüíªAPI Developer Portal Setup (Swagger)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-2f366650f320edcfcf53d73c80250a32.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">üë®üèæ‚ÄçüíªAPI Developer Portal Setup (Swagger)</h1>

<div class="quarto-title-authors">
</div>

</section>
<section>
<section id="data-engineering-pipelines" class="title-slide slide level1 center">
<h1>üìä Data Engineering Pipelines</h1>
<p>Lucas Cordova</p>
</section>
<section id="overview-of-pipeline-stages" class="slide level2">
<h2>Overview of Pipeline Stages</h2>
<ul>
<li>Database Service Setup</li>
<li>Flight Data Ingestion</li>
<li>Weather Data Ingestion</li>
<li>Data Transformation</li>
<li>Dashboard Service</li>
<li>DB/API Bridge</li>
<li>API Developer Portal</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="setting-up-the-postgres-service-on-railway" class="title-slide slide level1 center">
<h1>Setting Up the Postgres Service on Railway</h1>

</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<p>In this pipeline, the <strong>Postgres</strong> service functions as the central knowledge repository for all collected and transformed data. It plays a dual role:</p>
<ol type="1">
<li><strong>Raw Data Storage</strong> ‚Äì Capturing unstructured API responses from external ingestion services (e.g., OpenSky Network for flights, Open-Meteo for weather).</li>
<li><strong>Structured Relational Modeling</strong> ‚Äì Housing clean, normalized data models post-transformation‚Äîready for querying, visualization, and API exposure.</li>
</ol>
</section>
<section id="overview-continued" class="slide level2">
<h2>Overview Continued</h2>
<p>As we build a system to detect <strong>‚Äúno-fly windows‚Äù</strong> based on weather thresholds over Portland, Postgres serves as the long-term memory of the pipeline. In this step, we‚Äôll deploy it using <a href="https://railway.app">Railway</a> and connect via <a href="https://www.beekeeperstudio.io/">Beekeeper Studio</a> to validate connectivity and inspect future data.</p>
</section>
<section id="prerequisites" class="slide level2">
<h2>Prerequisites</h2>
<p>Before proceeding, make sure you have:</p>
<ul>
<li>A <a href="https://github.com/">GitHub</a> account.</li>
<li>A <a href="https://railway.app">Railway</a> account with at least <strong>Hobby</strong> tier access.<br>
This requires a $5 credit deposit using a credit card.</li>
<li><a href="https://www.beekeeperstudio.io/">Beekeeper Studio</a> installed on your computer.<br>
Beekeeper is an open-source desktop SQL client for inspecting and querying PostgreSQL databases.</li>
</ul>
</section>
<section id="steps-to-set-up-the-postgres-service" class="slide level2">
<h2>Steps to Set Up the Postgres Service</h2>
<h3 id="create-a-new-project-in-railway">Create a New Project in Railway</h3>
<ol type="1">
<li>Log in at <a href="https://railway.app">railway.app</a>.</li>
<li>Click <strong>‚ÄúNew Project‚Äù</strong>.</li>
<li>Select <strong>‚ÄúBlank Project‚Äù</strong>.</li>
<li>Name your project (e.g., <code>no-fly-pipeline</code>) and click <strong>‚ÄúCreate Project‚Äù</strong>.</li>
</ol>
</section>
<section class="slide level2">

<h3 id="add-a-postgres-database">Add a Postgres Database</h3>
<ol type="1">
<li>In your project dashboard, click <strong>‚ÄúNew‚Äù</strong> to add a service.</li>
<li>Choose <strong>‚ÄúDatabase‚Äù</strong>, then click <strong>‚ÄúPostgreSQL‚Äù</strong>.</li>
<li>Railway will now deploy your Postgres service.</li>
</ol>
<p>Once provisioned, this database becomes the shared backend for all services in your pipeline.</p>
</section>
<section class="slide level2">

<h3 id="retrieve-your-public-connection-url">Retrieve Your Public Connection URL</h3>
<ol type="1">
<li>Click into the <strong>Postgres</strong> service from the project dashboard.</li>
<li>Open the <strong>Variables</strong> tab.</li>
<li>Copy the <code>DATABASE_PUBLIC_URL</code> ‚Äî it will look something like: <code>postgresql://postgres:&lt;some-passsword&gt;@&lt;some-server&gt;.proxy.rlwy.net:20848/railway</code>.</li>
</ol>
<p>This URL is your access point for Beekeeper and other services that will connect to the database.</p>
</section>
<section class="slide level2">

<h3 id="connect-to-postgres-using-beekeeper-studio">Connect to Postgres Using Beekeeper Studio</h3>
<p>You‚Äôll use <strong>Beekeeper Studio</strong> to explore and verify your connection to the database.</p>
<h4 id="launch-beekeeper-studio">Launch Beekeeper Studio</h4>
<p>Open the app and click <strong>‚ÄúNew Connection‚Äù</strong>.</p>
<h4 id="import-the-url">Import the URL</h4>
<ol type="1">
<li>Choose <strong>‚ÄúPostgreSQL‚Äù</strong> from the connection type options.</li>
<li>Click <strong>‚ÄúImport from URL‚Äù</strong> (top-right or near the bottom of the connection screen).</li>
<li>Paste the <code>DATABASE_PUBLIC_URL</code> from Railway.</li>
<li>Click <strong>‚ÄúConnect‚Äù</strong>.</li>
</ol>
<h4 id="confirm-connection">Confirm Connection</h4>
<p>Once connected, you‚Äôll see an empty database. That‚Äôs expected‚Äîyour ingestion and transformation services will populate it in later steps. For now, you can:</p>
<ul>
<li>Test SQL queries.</li>
<li>Monitor schema evolution.</li>
<li>Verify your database is reachable from your local environment.</li>
</ul>
</section>
<section class="slide level2">

<h3 id="create-tables-for-raw-json-storage">Create Tables for Raw JSON Storage</h3>
<p>Before data ingestion can begin, you need to create two tables in Postgres to hold the raw, unstructured API responses from the flight and weather ingestion services. These tables will serve as append-only logs that store the full JSON payloads alongside timestamps for later transformation.</p>
<p>We‚Äôll create:</p>
<ul>
<li><code>flight_json_data</code>: stores data retrieved from the OpenSky Network.</li>
<li><code>weather_json_data</code>: stores data retrieved from the Open-Meteo API.</li>
</ul>
</section>
<section id="raw-json-storage-continued" class="slide level2">
<h2>RAW JSON Storage Continued</h2>
<p>Each table includes:</p>
<ul>
<li><code>id</code>: an auto-incrementing primary key.</li>
<li><code>raw_json</code>: the unmodified API response stored as a <code>jsonb</code> object.</li>
<li><code>timestamptz</code>: a timestamp indicating when the data was ingested.</li>
</ul>
<h4 id="create-tables-using-sql">Create Tables Using SQL</h4>
<p>Paste the following SQL into Beekeeper Studio and execute it to create both tables:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> flight_json_data (</span>
<span id="cb1-2"><a></a> <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb1-3"><a></a> raw_json JSONB <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb1-4"><a></a> timestamptz TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb1-5"><a></a>);</span>
<span id="cb1-6"><a></a></span>
<span id="cb1-7"><a></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> weather_json_data (</span>
<span id="cb1-8"><a></a> <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb1-9"><a></a> raw_json JSONB <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb1-10"><a></a> timestamptz TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb1-11"><a></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="whats-next" class="slide level2">
<h2>What‚Äôs Next?</h2>
<p>Now that your Postgres service is up and running, it‚Äôs ready to accept incoming unstructured data from your ingestion services: - ‚úàÔ∏è Web2DB Flights: gathers flight telemetry from the OpenSky Network. - üåßÔ∏è Web2DB Weather: gathers Portland weather conditions from Open-Meteo.</p>
<p>These services will write raw JSON payloads to the database every 5 minutes. Later, the DataTransform service will structure that data hourly into relational tables optimized for analysis.</p>
<p>In the <a href="../pipelines/flight-ingestion-service.html">next step</a>, we‚Äôll configure the Web2DB Flights service to begin live ingestion.</p>
<p>üìö References - <a href="Railway Docs ‚Äì PostgreSQL">https://docs.railway.app/guides/postgresql</a> - <a href="Beekeeper Studio">https://www.beekeeperstudio.io/</a> - <a href="Connect to Railway from External Clients">https://docs.railway.app/databases/external-access</a></p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="setting-up-the-web2db-flights-ingestion-service" class="title-slide slide level1 center">
<h1>Setting Up the <code>Web2DB Flights</code> Ingestion Service</h1>

</section>
<section id="overview-1" class="slide level2">
<h2>Overview</h2>
<p>In this step, you‚Äôll set up the <strong>Web2DB Flights</strong> ingestion service, which fetches live flight data from the <a href="https://opensky-network.org/apidoc/rest.html">OpenSky Network API</a> and stores it in your Postgres database every five minutes.</p>
<p>This service will collect unstructured flight telemetry data and append it to the <code>flight_json_data</code> table in raw JSON format. You‚Äôll deploy it as a container on Railway using the <code>lucascordova/web2db</code> image and configure it to run on a schedule.</p>
</section>
<section id="using-public-apis-in-your-own-projects" class="slide level2">
<h2>Using Public APIs in Your Own Projects</h2>
<p>If you‚Äôre building your own ingestion service using a different API, here‚Äôs the general process:</p>
<ol type="1">
<li><strong>Check if the API requires authentication</strong> (e.g., an API key or access token).</li>
<li><strong>Read the API documentation</strong> to understand query parameters, rate limits, and response structure.</li>
<li><strong>Build your request URL</strong> including any necessary geographic filters, authentication tokens, or query strings.</li>
<li><strong>Test the request</strong> manually (e.g., in your browser or Postman) before deploying it inside a service like Railway.</li>
</ol>
</section>
<section id="using-public-apis-continued" class="slide level2">
<h2>Using Public APIs Continued</h2>
<p>For APIs that require keys or tokens, you should always inject these as <strong>environment variables</strong>, never hardcoded in your code or Docker image.</p>
</section>
<section id="about-the-opensky-api-url" class="slide level2">
<h2>About the OpenSky API URL</h2>
<p>For this demo, we‚Äôre using the following public OpenSky endpoint: `https://opensky-network.org/api/states/all?lamin=45.08&amp;lomin=-123.50&amp;lamax=45.88&amp;lomax=-122.00‚Äô</p>
<h3 id="url-breakdown">üó∫Ô∏è URL Breakdown:</h3>
<ul>
<li><code>lamin</code> and <code>lamax</code>: latitude min/max (45.08 to 45.88)</li>
<li><code>lomin</code> and <code>lomax</code>: longitude min/max (‚àí123.50 to ‚àí122.00)</li>
</ul>
<p>This bounding box covers the <strong>Portland metropolitan area</strong> and surrounding airspace.</p>
<p>üìö Learn more at:<br>
üîó <a href="https://opensky-network.org/apidoc/rest.html">OpenSky Network REST API Documentation</a></p>
</section>
<section id="deploying-the-web2db-flights-service" class="slide level2">
<h2>Deploying the Web2DB Flights Service</h2>
<h3 id="add-the-docker-service-in-railway">Add the Docker Service in Railway</h3>
<ol type="1">
<li>In your Railway project, click <strong>‚ÄúNew‚Äù</strong> ‚Üí <strong>‚ÄúDeploy from Docker Image‚Äù</strong>.</li>
<li>Enter the image name: <code>lucascordova/web2db</code></li>
<li>Click <strong>Deploy</strong>.</li>
</ol>
</section>
<section class="slide level2">

<h3 id="configure-environment-variables">Configure Environment Variables</h3>
<p>Once deployed, go to the <strong>Variables</strong> tab and add the following:</p>
<table class="caption-top">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SITE_URL</code></td>
<td><code>https://opensky-network.org/api/states/all?lamin=45.08&amp;lomin=-123.50&amp;lamax=45.88&amp;lomax=-122.00</code></td>
</tr>
<tr class="even">
<td><code>DATABASE_URL</code></td>
<td><code>${{Postgres.DATABASE_PUBLIC_URL}}</code></td>
</tr>
<tr class="odd">
<td><code>TABLE_NAME</code></td>
<td><code>flight_json_data</code></td>
</tr>
<tr class="even">
<td><code>DEBUG</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>üí° Use the variable picker in Railway to reference your Postgres service directly for <code>DATABASE_URL</code>.</p>
</blockquote>
</section>
<section id="scheduling-the-ingestion" class="slide level2">
<h2>Scheduling the Ingestion</h2>
<h3 id="set-up-cron-trigger">Set Up Cron Trigger</h3>
<ol type="1">
<li>Go to the <strong>Settings</strong> tab of the Web2DB Flights service.</li>
<li>Scroll to the <strong>Triggers</strong> section and click <strong>‚ÄúNew Trigger‚Äù</strong>.</li>
<li>Choose <strong>‚ÄúCron‚Äù</strong> as the type.</li>
<li>Enter the schedule: <code>*/5 * * * *</code></li>
</ol>
<p>This means: ‚ÄúRun every 5 minutes.‚Äù</p>
<p>üß† Cron Format Reference: - <code>*/5</code> = every 5 minutes<br>
- Full format is <code>minute hour day month weekday</code><br>
üìö <a href="https://crontab.guru/#*/5_*_*_*_*">Crontab Guru</a> is a great tool to preview and test your expressions.</p>
</section>
<section id="testing-the-ingestion" class="slide level2">
<h2>Testing the Ingestion</h2>
<p>After saving the environment variables and trigger, your ingestion service should begin collecting data every 5 minutes.</p>
<h3 id="verify-the-data-is-flowing">‚úÖ Verify the Data is Flowing</h3>
<ol type="1">
<li>Open <strong>Beekeeper Studio</strong>.</li>
<li>Connect to your Postgres database (if not already connected).</li>
<li>Run the following SQL query:</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> flight_json_data <span class="kw">ORDER</span> <span class="kw">BY</span> timestamptz <span class="kw">DESC</span> <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If data is being ingested correctly, you should see rows with timestamps and raw JSON.</p>
<p>üõ†Ô∏è Troubleshooting Tips ‚Ä¢ Go to the Deployments tab to check if the latest deployment Completed successfully. ‚Ä¢ Check the Logs tab to view debug output (especially helpful if DEBUG=TRUE is set). ‚Ä¢ Review the Cron Triggers to make sure they‚Äôre running on schedule. ‚Ä¢ Double-check the SITE_URL and DATABASE_URL for typos or incorrect formatting.</p>
</section>
<section id="whats-next-1" class="slide level2">
<h2>What‚Äôs Next?</h2>
<p>Now that your Web2DB Flights service is live and filling your database with raw flight data, we‚Äôll set up the companion Web2DB Weather service to do the same with meteorological data. Together, these two data streams will power our future correlation and transformation services.</p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="setting-up-the-web2db-weather-ingestion-service" class="title-slide slide level1 center">
<h1>Setting Up the <code>Web2DB Weather</code> Ingestion Service</h1>

</section>
<section id="overview-2" class="slide level2">
<h2>Overview</h2>
<p>In this step, you‚Äôll set up the <strong>Web2DB Weather</strong> ingestion service, which fetches live weather data for the Portland area from the <a href="https://open-meteo.com/en/docs">Open-Meteo API</a> and stores it in your Postgres database every five minutes.</p>
<p>This service collects unstructured weather readings‚Äîlike temperature and wind speed‚Äîand writes them to the <code>weather_json_data</code> table as raw JSON for later transformation and analysis. The data will later be joined with flight data to investigate correlations such as weather-driven no-fly windows.</p>
</section>
<section id="about-the-open-meteo-api-url" class="slide level2">
<h2>About the Open-Meteo API URL</h2>
<p>For this demo, we‚Äôre using the following Open-Meteo endpoint:</p>
<p><code>https://api.open-meteo.com/v1/forecast?latitude=45.52&amp;longitude=-122.68&amp;current=temperature_2m,wind_speed_10m,weathercode</code></p>
<h3 id="url-breakdown-1">üåê URL Breakdown:</h3>
<ul>
<li><code>latitude=45.52</code> and <code>longitude=-122.68</code> pinpoint <strong>downtown Portland</strong>.</li>
<li><code>current=...</code> specifies the current weather variables to return:
<ul>
<li><code>temperature_2m</code>: air temperature 2 meters above the ground.</li>
<li><code>wind_speed_10m</code>: wind speed 10 meters above the ground.</li>
<li><code>weathercode</code>: numeric weather condition code (e.g., fog, rain, snow).</li>
</ul></li>
</ul>
<table class="caption-top">
<tbody>
<tr class="odd">
<td>### üìö Learn more at:</td>
</tr>
<tr class="even">
<td>üîó <a href="https://open-meteo.com/en/docs">Open-Meteo API Docs</a></td>
</tr>
</tbody>
</table>
</section>
<section id="deploying-the-web2db-weather-service" class="slide level2">
<h2>Deploying the Web2DB Weather Service</h2>
<h3 id="add-the-docker-service-in-railway-1">Add the Docker Service in Railway</h3>
<ol type="1">
<li><p>In your Railway project, click <strong>‚ÄúNew‚Äù</strong> ‚Üí <strong>‚ÄúDeploy from Docker Image‚Äù</strong>.</p></li>
<li><p>Enter the image name: <code>lucascordova/web2db</code></p></li>
<li><p>Click <strong>Deploy</strong>.</p></li>
</ol>
</section>
<section class="slide level2">

<h3 id="configure-environment-variables-1">Configure Environment Variables</h3>
<p>Once the image is deployed, go to the <strong>Variables</strong> tab and add the following:</p>
<table class="caption-top">
<colgroup>
<col style="width: 13%">
<col style="width: 86%">
</colgroup>
<thead>
<tr class="header">
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>SITE_URL</code></td>
<td><code>https://api.open-meteo.com/v1/forecast?latitude=45.52&amp;longitude=-122.68&amp;current=temperature_2m,wind_speed_10m,weathercode</code></td>
</tr>
<tr class="even">
<td><code>DATABASE_URL</code></td>
<td><code>${{Postgres.DATABASE_PUBLIC_URL}}</code></td>
</tr>
<tr class="odd">
<td><code>TABLE_NAME</code></td>
<td><code>weather_json_data</code></td>
</tr>
<tr class="even">
<td><code>DEBUG</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>‚úÖ Tip: Use Railway‚Äôs variable picker to link to your Postgres service when setting <code>DATABASE_URL</code>.</p>
</blockquote>
</section>
<section id="scheduling-the-ingestion-1" class="slide level2">
<h2>Scheduling the Ingestion</h2>
<h3 id="set-up-cron-trigger-1">Set Up Cron Trigger</h3>
<ol type="1">
<li>Go to the <strong>Settings</strong> tab of the Web2DB Weather service.</li>
<li>Scroll to <strong>Triggers</strong> and click <strong>‚ÄúNew Trigger‚Äù</strong>.</li>
<li>Choose <strong>‚ÄúCron‚Äù</strong> as the trigger type.</li>
<li>Use this schedule: <code>*/5 * * * *</code></li>
</ol>
<p>This means the service will run <strong>every 5 minutes</strong>.</p>
<p>üìö Reference: <a href="https://crontab.guru/#*/5_*_*_*_*">Crontab Guru</a> ‚Äî an easy tool to preview cron expressions.</p>
</section>
<section id="testing-the-ingestion-1" class="slide level2">
<h2>Testing the Ingestion</h2>
<p>Once your cron trigger and environment variables are saved, the service will begin pulling weather data.</p>
<h3 id="verify-the-data">‚úÖ Verify the Data</h3>
<ol type="1">
<li>Open <strong>Beekeeper Studio</strong>.</li>
<li>Connect to your Postgres database (if you haven‚Äôt already).</li>
<li>Run:</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> weather_json_data <span class="kw">ORDER</span> <span class="kw">BY</span> timestamptz <span class="kw">DESC</span> <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You should see recent entries showing full JSON responses from the Open-Meteo API.</p>
</section>
<section id="troubleshooting-tips" class="slide level2">
<h2>üõ†Ô∏è Troubleshooting Tips</h2>
<pre><code>- Check the Deployments tab in Railway to confirm successful runs.
- Use the Logs tab to inspect real-time debug output.
- Ensure the SITE_URL is formatted correctly (with no line breaks or spaces).
- If the table is still empty after 5‚Äì10 minutes, double-check the DATABASE_URL, TABLE_NAME, and cron settings.</code></pre>
</section>
<section id="whats-next-2" class="slide level2">
<h2>What‚Äôs Next?</h2>
<p>With both Web2DB Flights and Web2DB Weather streaming live data into your Postgres instance, you‚Äôre ready to build the DataTransform service that will process this raw data into structured, relational models‚Äîmaking it easier to perform analytics and build dashboards.</p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="setting-up-the-datatransform-service" class="title-slide slide level1 center">
<h1>Setting Up the <code>DataTransform</code> Service</h1>

</section>
<section id="overview-3" class="slide level2">
<h2>Overview</h2>
<p>In this section, you‚Äôll design and deploy a transformation service called <code>DataTransform</code>. This service will extract meaningful fields from your raw JSON flight and weather data and insert them into clean, structured tables in your Postgres database.</p>
<p>This transformation process involves: - Understanding the structure of raw JSON. - Designing normalized physical tables for analysis. - Writing SQL to extract values using Postgres JSON functions. - Automating the transformation with a scheduled job in Railway.</p>
</section>
<section id="understand-the-json-structure" class="slide level2">
<h2>Understand the JSON Structure</h2>
<p>Before transforming the data, you must understand what the raw JSON looks like. You can do this by running:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a></a><span class="kw">SELECT</span> raw_json <span class="kw">FROM</span> flight_json_data <span class="kw">ORDER</span> <span class="kw">BY</span> timestamptz <span class="kw">DESC</span> <span class="kw">LIMIT</span> <span class="dv">1</span>;</span>
<span id="cb5-2"><a></a><span class="kw">SELECT</span> raw_json <span class="kw">FROM</span> weather_json_data <span class="kw">ORDER</span> <span class="kw">BY</span> timestamptz <span class="kw">DESC</span> <span class="kw">LIMIT</span> <span class="dv">1</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Explore the shape and nesting of each payload. For example: - OpenSky states is an array of arrays. OpenSky JSON Structure - Open-Meteo JSON is a nested object. Open-Meteo Example</p>
<p>üìö Reference: <a href="https://www.postgresql.org/docs/current/queries-with.html">PostgreSQL JSON Functions and Operators</a></p>
</section>
<section id="design-your-physical-schema" class="slide level2">
<h2>Design Your Physical Schema</h2>
<p>Based on the JSON contents, you‚Äôll need normalized tables to store flight and weather data. Here‚Äôs the schema you‚Äôll use:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> flight_json_data (</span>
<span id="cb6-2"><a></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb6-3"><a></a>    raw_json JSONB <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-4"><a></a>    timestamptz TIMESTAMPTZ <span class="kw">DEFAULT</span> <span class="fu">CURRENT_TIMESTAMP</span></span>
<span id="cb6-5"><a></a>);</span>
<span id="cb6-6"><a></a></span>
<span id="cb6-7"><a></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> weather_json_data (</span>
<span id="cb6-8"><a></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb6-9"><a></a>    raw_json JSONB <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-10"><a></a>    timestamptz TIMESTAMPTZ <span class="kw">DEFAULT</span> <span class="fu">CURRENT_TIMESTAMP</span></span>
<span id="cb6-11"><a></a>);</span>
<span id="cb6-12"><a></a></span>
<span id="cb6-13"><a></a><span class="co">-- Structured output tables</span></span>
<span id="cb6-14"><a></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> flights (</span>
<span id="cb6-15"><a></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb6-16"><a></a>    icao24 <span class="dt">VARCHAR</span>(<span class="dv">10</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-17"><a></a>    callsign <span class="dt">VARCHAR</span>(<span class="dv">10</span>),</span>
<span id="cb6-18"><a></a>    country <span class="dt">VARCHAR</span>(<span class="dv">64</span>),</span>
<span id="cb6-19"><a></a>    latitude <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span>,</span>
<span id="cb6-20"><a></a>    longitude <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span>,</span>
<span id="cb6-21"><a></a>    altitude_meters <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span>,</span>
<span id="cb6-22"><a></a>    velocity_knots <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span>,</span>
<span id="cb6-23"><a></a>    heading_degrees <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span>,</span>
<span id="cb6-24"><a></a>    vertical_rate <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span>,</span>
<span id="cb6-25"><a></a>    <span class="dt">timestamp</span> TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb6-26"><a></a>);</span>
<span id="cb6-27"><a></a></span>
<span id="cb6-28"><a></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> weather_observations (</span>
<span id="cb6-29"><a></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb6-30"><a></a>    latitude <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-31"><a></a>    longitude <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-32"><a></a>    <span class="dt">timestamp</span> TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-33"><a></a>    precipitation_mm <span class="dt">DOUBLE</span> <span class="dt">PRECISION</span>,</span>
<span id="cb6-34"><a></a>    weathercode <span class="dt">SMALLINT</span></span>
<span id="cb6-35"><a></a>);</span>
<span id="cb6-36"><a></a></span>
<span id="cb6-37"><a></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> weather_condition (</span>
<span id="cb6-38"><a></a>    code <span class="dt">SMALLINT</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb6-39"><a></a>    description TEXT</span>
<span id="cb6-40"><a></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These tables will be the targets of your transformation logic.</p>
</section>
<section id="write-sql-to-transform-the-data" class="slide level2">
<h2>Write SQL to Transform the Data</h2>
<p>What‚Äôs a Common Table Expression?</p>
<p>A Common Table Expression (CTE) is a temporary result set defined at the beginning of a SQL statement. It helps modularize complex queries and allows you to: - Break down a multi-step transformation into readable pieces. - Reference intermediate results multiple times.</p>
<p>üìö Reference: <a href="https://www.postgresql.org/docs/current/queries-with.html">CTEs in PostgreSQL</a></p>
</section>
<section id="example-transformation-for-flights" class="slide level2">
<h2>Example Transformation for Flights</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a></a><span class="cf">BEGIN</span>;</span>
<span id="cb7-2"><a></a></span>
<span id="cb7-3"><a></a><span class="kw">WITH</span> <span class="dt">raw</span> <span class="kw">AS</span> (</span>
<span id="cb7-4"><a></a>    <span class="kw">SELECT</span> <span class="kw">id</span>, timestamptz, jsonb_array_elements(raw_json<span class="op">-&gt;</span><span class="st">'states'</span>) <span class="kw">AS</span> state</span>
<span id="cb7-5"><a></a>    <span class="kw">FROM</span> flight_json_data</span>
<span id="cb7-6"><a></a>),</span>
<span id="cb7-7"><a></a>parsed <span class="kw">AS</span> (</span>
<span id="cb7-8"><a></a>    <span class="kw">SELECT</span></span>
<span id="cb7-9"><a></a>        <span class="kw">id</span>,</span>
<span id="cb7-10"><a></a>        state<span class="op">-&gt;&gt;</span><span class="dv">0</span> <span class="kw">AS</span> icao24,</span>
<span id="cb7-11"><a></a>        state<span class="op">-&gt;&gt;</span><span class="dv">1</span> <span class="kw">AS</span> callsign,</span>
<span id="cb7-12"><a></a>        state<span class="op">-&gt;&gt;</span><span class="dv">2</span> <span class="kw">AS</span> country,</span>
<span id="cb7-13"><a></a>        (state<span class="op">-&gt;&gt;</span><span class="dv">6</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> longitude,</span>
<span id="cb7-14"><a></a>        (state<span class="op">-&gt;&gt;</span><span class="dv">5</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> latitude,</span>
<span id="cb7-15"><a></a>        (state<span class="op">-&gt;&gt;</span><span class="dv">7</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> altitude_meters,</span>
<span id="cb7-16"><a></a>        (state<span class="op">-&gt;&gt;</span><span class="dv">9</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> velocity_knots,</span>
<span id="cb7-17"><a></a>        (state<span class="op">-&gt;&gt;</span><span class="dv">10</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> heading_degrees,</span>
<span id="cb7-18"><a></a>        (state<span class="op">-&gt;&gt;</span><span class="dv">11</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> vertical_rate,</span>
<span id="cb7-19"><a></a>        timestamptz</span>
<span id="cb7-20"><a></a>    <span class="kw">FROM</span> <span class="dt">raw</span></span>
<span id="cb7-21"><a></a>)</span>
<span id="cb7-22"><a></a><span class="kw">INSERT</span> <span class="kw">INTO</span> flights (</span>
<span id="cb7-23"><a></a>    icao24, callsign, country, latitude, longitude,</span>
<span id="cb7-24"><a></a>    altitude_meters, velocity_knots, heading_degrees,</span>
<span id="cb7-25"><a></a>    vertical_rate, <span class="dt">timestamp</span></span>
<span id="cb7-26"><a></a>)</span>
<span id="cb7-27"><a></a><span class="kw">SELECT</span></span>
<span id="cb7-28"><a></a>    icao24, callsign, country, latitude, longitude,</span>
<span id="cb7-29"><a></a>    altitude_meters, velocity_knots, heading_degrees,</span>
<span id="cb7-30"><a></a>    vertical_rate, timestamptz</span>
<span id="cb7-31"><a></a><span class="kw">FROM</span> parsed;</span>
<span id="cb7-32"><a></a></span>
<span id="cb7-33"><a></a><span class="co">-- Delete processed rows</span></span>
<span id="cb7-34"><a></a><span class="kw">DELETE</span> <span class="kw">FROM</span> flight_json_data;</span>
<span id="cb7-35"><a></a></span>
<span id="cb7-36"><a></a><span class="kw">COMMIT</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="example-transformation-for-weather" class="slide level2">
<h2>Example Transformation for Weather</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a></a><span class="cf">BEGIN</span>;</span>
<span id="cb8-2"><a></a></span>
<span id="cb8-3"><a></a><span class="kw">WITH</span> <span class="dt">raw</span> <span class="kw">AS</span> (</span>
<span id="cb8-4"><a></a>    <span class="kw">SELECT</span> <span class="kw">id</span>, raw_json, timestamptz</span>
<span id="cb8-5"><a></a>    <span class="kw">FROM</span> weather_json_data</span>
<span id="cb8-6"><a></a>),</span>
<span id="cb8-7"><a></a>parsed <span class="kw">AS</span> (</span>
<span id="cb8-8"><a></a>    <span class="kw">SELECT</span></span>
<span id="cb8-9"><a></a>        (raw_json<span class="op">-&gt;</span><span class="st">'latitude'</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> latitude,</span>
<span id="cb8-10"><a></a>        (raw_json<span class="op">-&gt;</span><span class="st">'longitude'</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> longitude,</span>
<span id="cb8-11"><a></a>        (raw_json<span class="op">-&gt;</span><span class="st">'current'</span><span class="op">-&gt;</span><span class="st">'precipitation'</span>):<span class="ch">:DOUBLE</span> <span class="dt">PRECISION</span> <span class="kw">AS</span> precipitation_mm,</span>
<span id="cb8-12"><a></a>        (raw_json<span class="op">-&gt;</span><span class="st">'current'</span><span class="op">-&gt;</span><span class="st">'weathercode'</span>):<span class="ch">:SMALLINT</span> <span class="kw">AS</span> weathercode,</span>
<span id="cb8-13"><a></a>        timestamptz <span class="kw">AS</span> <span class="dt">timestamp</span></span>
<span id="cb8-14"><a></a>    <span class="kw">FROM</span> <span class="dt">raw</span></span>
<span id="cb8-15"><a></a>)</span>
<span id="cb8-16"><a></a><span class="kw">INSERT</span> <span class="kw">INTO</span> weather_observations (</span>
<span id="cb8-17"><a></a>    latitude, longitude, precipitation_mm, weathercode, <span class="dt">timestamp</span></span>
<span id="cb8-18"><a></a>)</span>
<span id="cb8-19"><a></a><span class="kw">SELECT</span></span>
<span id="cb8-20"><a></a>    latitude, longitude, precipitation_mm, weathercode, <span class="dt">timestamp</span></span>
<span id="cb8-21"><a></a><span class="kw">FROM</span> parsed;</span>
<span id="cb8-22"><a></a></span>
<span id="cb8-23"><a></a><span class="co">-- Delete processed rows</span></span>
<span id="cb8-24"><a></a><span class="kw">DELETE</span> <span class="kw">FROM</span> weather_json_data;</span>
<span id="cb8-25"><a></a></span>
<span id="cb8-26"><a></a><span class="kw">COMMIT</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section class="slide level2">

<h3 id="why-use-transactions">Why Use Transactions?</h3>
<p>A TRANSACTION ensures that either all your steps complete successfully, or none of them are applied. This prevents partial writes and data corruption. ‚Ä¢ BEGIN; starts the transaction. ‚Ä¢ COMMIT; applies all changes if no error occurred. ‚Ä¢ If an error occurs, the entire transaction can be rolled back.</p>
</section>
<section id="use-the-github-template" class="slide level2">
<h2>Use the GitHub Template</h2>
<pre><code>1.  [Use the db_transform GitHub template](https://github.com/LucasCordova/db_transform).
2.  Click the ‚ÄúUse this template‚Äù button.
3.  Name your repository: `weather_flight_db_transform`
4.  Choose your GitHub account and click Create Repository.</code></pre>
</section>
<section id="add-your-sql-to-clean.sql" class="slide level2">
<h2>Add Your SQL to clean.sql</h2>
<pre><code>1.  Open the new repository on GitHub (recommended) or clone it locally.
2.  Edit the clean.sql file. If you are editing in the browser, choose the `pencil` icon. Paste your flight and weather transformation SQL inside it.
3.  Save the file and commit. In the browser editor, click the Commit changes... button, add a message, and click the final Commit changes button.</code></pre>
</section>
<section id="deploy-the-service-in-railway" class="slide level2">
<h2>Deploy the Service in Railway</h2>
<pre><code>1.  Go to your Railway project.
2.  Click New ‚Üí Deploy from GitHub Repo.
3.  Click ‚ÄúConfigure GitHub App‚Äù to give Railway access to your GitHub account.
4.  Choose the repository weather_flight_db_transform.
5.  Add the following environment variables in the Variables tab. </code></pre>
<table class="caption-top">
<thead>
<tr class="header">
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>DATABASE_URL</td>
<td><code>${{Postgres.DATABASE_PUBLIC_URL}}</code></td>
</tr>
</tbody>
</table>
<pre><code>6.  Click Deploy.</code></pre>
</section>
<section id="set-cron-schedule" class="slide level2">
<h2>Set Cron Schedule</h2>
<pre><code>1.  Go to the Settings tab of the DataTransform service.
2.  Scroll to Triggers ‚Üí New Trigger.
3.  Choose Cron and enter: `0 * * * *`.
This means the service runs once every hour, at the top of the hour.</code></pre>
</section>
<section id="testing-and-validation" class="slide level2">
<h2>Testing and Validation</h2>
<pre><code>‚úÖ Check the Tables in Beekeeper

    After the first cron run, inspect the structured tables:</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> flights <span class="kw">ORDER</span> <span class="kw">BY</span> <span class="dt">timestamp</span> <span class="kw">DESC</span> <span class="kw">LIMIT</span> <span class="dv">10</span>;</span>
<span id="cb15-2"><a></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> weather_observations <span class="kw">ORDER</span> <span class="kw">BY</span> <span class="dt">timestamp</span> <span class="kw">DESC</span> <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>‚úÖ View Logs in Railway
    Use the Logs tab to inspect any errors or debug output.</code></pre>
</section>
<section id="whats-next-3" class="slide level2">
<h2>What‚Äôs Next?</h2>
<pre><code>Now that your structured data is flowing, you can visualize and analyze it in the next step using Grafana Dashboards. You‚Äôll use SQL queries to explore patterns in flight activity and weather data‚Äîlaying the foundation for answering your core research question.</code></pre>
</section>
<section id="but-first-views" class="slide level2">
<h2>üåÅ But first, Views</h2>
<p>A <strong>View</strong> in Postgres is a virtual table based on a SQL <code>SELECT</code> query. It behaves just like a table for reading, but doesn‚Äôt store any data itself‚Äîit simply runs the query behind it whenever it‚Äôs accessed.</p>
<p>Views are excellent for dashboards because:</p>
<ul>
<li>‚úÖ They abstract complex queries behind a simple name.</li>
<li>‚úÖ They can be reused by multiple clients (like Grafana).</li>
<li>‚úÖ You can restrict access to views rather than raw tables using <strong>Postgres roles</strong>.</li>
<li>‚úÖ They allow you to pre-join and pre-aggregate data in a way that‚Äôs efficient and secure for visualization.</li>
</ul>
</section>
<section id="create-a-view-for-the-dashboard" class="slide level2">
<h2>Create a View for the Dashboard</h2>
<p>Let‚Äôs create a view that answers our research question: &gt; <em>Are there ‚Äúno-fly windows‚Äù correlated with weather thresholds?</em></p>
<p>This view joins structured flight and weather data to support correlation queries:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a></a><span class="kw">CREATE</span> <span class="kw">OR</span> <span class="kw">REPLACE</span> <span class="kw">VIEW</span> flight_weather <span class="kw">AS</span></span>
<span id="cb18-2"><a></a><span class="kw">SELECT</span></span>
<span id="cb18-3"><a></a>    f.<span class="dt">timestamp</span>,</span>
<span id="cb18-4"><a></a>    f.callsign,</span>
<span id="cb18-5"><a></a>    f.altitude_meters,</span>
<span id="cb18-6"><a></a>    f.velocity_knots,</span>
<span id="cb18-7"><a></a>    f.latitude <span class="kw">AS</span> flight_latitude,</span>
<span id="cb18-8"><a></a>    f.longitude <span class="kw">AS</span> flight_longitude,</span>
<span id="cb18-9"><a></a>    w.precipitation_mm,</span>
<span id="cb18-10"><a></a>    w.weathercode,</span>
<span id="cb18-11"><a></a>    w.latitude <span class="kw">AS</span> weather_latitude,</span>
<span id="cb18-12"><a></a>    w.longitude <span class="kw">AS</span> weather_longitude</span>
<span id="cb18-13"><a></a><span class="kw">FROM</span></span>
<span id="cb18-14"><a></a>    flights f</span>
<span id="cb18-15"><a></a><span class="kw">JOIN</span></span>
<span id="cb18-16"><a></a>    weather_observations w</span>
<span id="cb18-17"><a></a><span class="kw">ON</span></span>
<span id="cb18-18"><a></a>    date_trunc(<span class="st">'minute'</span>, f.<span class="dt">timestamp</span>) <span class="op">=</span> date_trunc(<span class="st">'minute'</span>, w.<span class="dt">timestamp</span>)</span>
<span id="cb18-19"><a></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb18-20"><a></a>    f.<span class="dt">timestamp</span> <span class="kw">DESC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="deploying-grafana-in-railway" class="slide level2">
<h2>Deploying Grafana in Railway</h2>
<h3 id="add-the-grafana-template">Add the Grafana Template</h3>
<ol type="1">
<li><p>In your Railway project, click <strong>‚ÄúCreate‚Äù</strong> ‚Üí <strong>‚ÄúTemplate‚Äù</strong>.</p></li>
<li><p>Type <strong>Grafana</strong> in the search bar.</p></li>
<li><p>Select the version provided by <strong>Andre Lademann‚Äôs Projects</strong>.</p></li>
<li><p>Add the following environment variables:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GF_SECURITY_ADMIN_USER</td>
<td>grafanareader</td>
</tr>
<tr class="even">
<td>GF_DEFAULT_INSTANCE_NAME</td>
<td>grafanapg</td>
</tr>
<tr class="odd">
<td>GF_SECURITY_ADMIN_PASSWORD</td>
<td>your-password</td>
</tr>
</tbody>
</table>
<p>Leave the 4 pre-configured environment variables as they are.</p>
<p>Once you‚Äôve entered the variables, the service will check connectivity and display a message saying <strong>‚ÄúReady to be deployed‚Äù</strong>.</p></li>
<li><p>Click [Deploy]</p>
<p>This will start the deployment process. It may take a few minutes.</p></li>
</ol>
</section>
<section class="slide level2">

<h3 id="enable-serverless-mode-on-grafana">Enable Serverless Mode on Grafana</h3>
<p>After deployment completes:</p>
<ol type="1">
<li>Return to the <strong>Grafana service</strong> in Railway.</li>
<li>Click on <strong>Settings</strong>.</li>
<li>Scroll down to <strong>‚ÄúServerless‚Äù</strong>.</li>
<li>Toggle <strong>Enable Serverless</strong> and click <strong>Deploy</strong> again.</li>
</ol>
<blockquote>
<p>‚úÖ Enabling serverless mode helps reduce cost because the service will <strong>go to sleep when not in use</strong> and <strong>wake up on demand</strong>. This is ideal for tools like Grafana that are used periodically.</p>
</blockquote>
</section>
<section id="add-a-grafana-specific-db-user" class="slide level2">
<h2>Add a Grafana-Specific DB User</h2>
<p>To avoid giving Grafana full access to your database, we‚Äôll create a <strong>read-only user</strong> that can only access the view.</p>
<h3 id="steps">Steps:</h3>
<ol type="1">
<li>Open your Postgres database in <strong>Beekeeper Studio</strong>.</li>
<li>Run the following SQL (replace <code>'password'</code> with one you‚Äôll remember):</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb19-1"><a></a><span class="kw">CREATE</span> <span class="fu">USER</span> grafanareader <span class="kw">WITH</span> <span class="kw">PASSWORD</span> <span class="st">'your_password'</span>;</span>
<span id="cb19-2"><a></a><span class="kw">GRANT</span> <span class="kw">USAGE</span> <span class="kw">ON</span> <span class="kw">SCHEMA</span> <span class="ot">"public"</span> <span class="kw">TO</span> grafanareader;</span>
<span id="cb19-3"><a></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> <span class="ot">"public"</span>.flight_weather <span class="kw">TO</span> grafanareader;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="connect-grafana-to-postgres" class="slide level2">
<h2>Connect Grafana to Postgres</h2>
<h3 id="copy-pghost-from-railway">Copy PGHOST from Railway</h3>
<ol type="1">
<li>Go to your <strong>Postgres service</strong> in Railway.</li>
<li>Under <strong>Environment Variables</strong>, copy the value for <code>PGHOST</code>.<br>
It will look like: <code>postgres.railway.internal</code>.</li>
</ol>
</section>
<section class="slide level2">

<h3 id="open-grafana-and-log-in">Open Grafana and Log In</h3>
<ol type="1">
<li>Go to your Grafana URL shown in the <strong>Deployments</strong> tab.<br>
Example:<br>
<a href="https://grafana-rbi9-production.up.railway.app">https://grafana-rbi9-production.up.railway.app</a></li>
<li>Log in with:
<ul>
<li><strong>Username</strong>: <code>grafanareader</code></li>
<li><strong>Password</strong>: the password you assigned earlier</li>
</ul></li>
</ol>
</section>
<section class="slide level2">

<h3 id="add-a-data-source">Add a Data Source</h3>
<ol type="1">
<li>In Grafana, click <strong>Connections</strong> on the left panel.</li>
<li>Click <strong>Data Sources</strong>.</li>
<li>Search for <strong>PostgreSQL</strong> and select it.</li>
</ol>
<h4 id="fill-in-the-following">Fill in the following:</h4>
<table class="caption-top">
<thead>
<tr class="header">
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Host</td>
<td><code>postgres.railway.internal:5432</code></td>
</tr>
<tr class="even">
<td>Database</td>
<td><code>railway</code></td>
</tr>
<tr class="odd">
<td>User</td>
<td><code>grafanareader</code></td>
</tr>
<tr class="even">
<td>Password</td>
<td><code>your_password</code></td>
</tr>
</tbody>
</table>
<p>Click <strong>Save &amp; Test</strong> to confirm connectivity.</p>
</section>
<section id="create-your-first-dashboard-in-grafana" class="slide level2">
<h2>Create Your First Dashboard in Grafana</h2>
<ol type="1">
<li>Go back to the <strong>Home</strong> page in Grafana.</li>
<li>Click <strong>‚ÄúCreate your first dashboard‚Äù</strong>.</li>
<li>Click <strong>‚ÄúAdd Visualization‚Äù</strong>.</li>
</ol>
<h3 id="configure-the-panel">Configure the Panel</h3>
<ol type="1">
<li><strong>Choose Data Source</strong>: Select the PostgreSQL source you just set up.</li>
<li><strong>From Table</strong>: Select the <code>flight_weather</code> view.</li>
<li><strong>Add Columns</strong>: Choose at least one time-based column (<code>timestamp</code>) and one data column (e.g., <code>altitude_meters</code> or <code>precipitation_mm</code>).</li>
<li>Click <strong>Run Query</strong>.</li>
<li>Use <strong>Table Mode</strong> or switch to a chart via <strong>Suggested Visualizations</strong>.</li>
</ol>
<p>You now have a live dashboard pulling from your structured data pipeline!</p>
</section>
<section id="whats-next-4" class="slide level2">
<h2>What‚Äôs Next?</h2>
<p>From here, you can:</p>
<ul>
<li>Add filters to segment by <code>weathercode</code>.</li>
<li>Aggregate values like average flight altitude during rain conditions.</li>
<li>Build a full visualization of ‚Äúno-fly‚Äù windows over time.</li>
</ul>
<p>In the <a href="../pipelines/db-api-bridge-service.html">next step</a> we‚Äôll expose your view as a <strong>REST API</strong> using PostgREST and document it using Swagger.</p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="setting-up-the-db-api-bridge-service-postgrest" class="title-slide slide level1 center">
<h1>Setting Up the DB API Bridge Service (PostgREST)</h1>

</section>
<section id="why-set-up-a-db-api-bridge" class="slide level2">
<h2>Why Set Up a DB API Bridge?</h2>
<p>Once your structured data is ready for exploration and integration, the next step is to expose it via an API. This allows your data to be accessed securely by dashboards, external applications, or developer tools. Instead of building a custom REST API, we can use <strong>PostgREST</strong>, which automates this process by generating RESTful endpoints directly from your PostgreSQL schema.</p>
</section>
<section id="what-is-postgrest" class="slide level2">
<h2>What is PostgREST?</h2>
<p><a href="https://postgrest.org">PostgREST</a> is a lightweight, open-source tool that turns your PostgreSQL database into a secure RESTful API. With PostgREST, your views and tables become accessible via HTTP without writing backend code.</p>
<h3 id="key-features">Key Features:</h3>
<ul>
<li>üöÄ Generates REST endpoints for tables, views, and stored procedures.</li>
<li>üîê Uses PostgreSQL‚Äôs native roles and permissions for access control.</li>
<li>üìä Perfect for exposing analytic views to tools like Swagger, frontend apps, and more.</li>
</ul>
</section>
<section id="step-by-step-deploy-postgrest-in-railway" class="slide level2">
<h2>Step-by-Step: Deploy PostgREST in Railway</h2>
<h3 id="create-the-service-in-railway">Create the Service in Railway</h3>
<ol type="1">
<li><p>Click <strong>Create</strong> in your Railway project.</p></li>
<li><p>Choose <strong>Docker Image</strong>.</p></li>
<li><p>Enter the Docker image name:</p>
<pre><code>postgrest/postgrest</code></pre></li>
<li><p>Click <strong>Deploy</strong>.</p></li>
</ol>
</section>
<section class="slide level2">

<h3 id="configure-network-and-serverless-options">Configure Network and Serverless Options</h3>
<p>After deployment:</p>
<ol type="1">
<li>Click on the <strong>Deployments</strong> tab, then select <strong>Settings</strong>.</li>
<li>Under <strong>Public Networking</strong>, click <strong>Generate Domain</strong>.
<ul>
<li>You can customize the domain to a meaningful name if desired.</li>
<li>Copy the <strong>public URL</strong> shown.</li>
</ul></li>
<li>Scroll to the <strong>Serverless</strong> section.</li>
<li>Toggle <strong>Enable Serverless</strong>, then click <strong>Deploy</strong> again.</li>
</ol>
<blockquote>
<p>Enabling <strong>Serverless</strong> mode helps reduce costs ‚Äî the service sleeps when not in use and wakes up on demand.</p>
</blockquote>
</section>
<section class="slide level2">

<h3 id="set-environment-variables">Set Environment Variables</h3>
<p>Navigate to the <strong>Variables</strong> tab and add the following:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>PGRST_DB_ANON_ROLE</code></td>
<td><code>web_anon</code></td>
</tr>
<tr class="even">
<td><code>PGRST_DB_SCHEMA</code></td>
<td><code>api</code></td>
</tr>
<tr class="odd">
<td><code>PGRST_DB_URI</code></td>
<td><code>${{DATABASE_URL}}</code></td>
</tr>
<tr class="even">
<td><code>PGRST_OPENAPI_SERVER_PROXY_URI</code></td>
<td><code>&lt;your public hostname&gt;</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Replace <code>&lt;your public hostname&gt;</code> with the public domain you generated in the previous step.</p>
</blockquote>
</section>
<section id="set-up-database-permissions" class="slide level2">
<h2>Set Up Database Permissions</h2>
<p>Open <strong>Beekeeper Studio</strong> and execute the following SQL:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><a></a><span class="co">-- Create a non-login role to define anonymous API access</span></span>
<span id="cb21-2"><a></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> web_anon NOLOGIN;</span>
<span id="cb21-3"><a></a></span>
<span id="cb21-4"><a></a><span class="co">-- Allow that role to access the "api" schema</span></span>
<span id="cb21-5"><a></a><span class="kw">GRANT</span> <span class="kw">USAGE</span> <span class="kw">ON</span> <span class="kw">SCHEMA</span> api <span class="kw">TO</span> web_anon;</span>
<span id="cb21-6"><a></a></span>
<span id="cb21-7"><a></a><span class="co">-- Limit access only to this view</span></span>
<span id="cb21-8"><a></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> api.general_aviation_weather_view <span class="kw">TO</span> web_anon;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This ensures PostgREST can only <strong>read</strong> from a specific schema (<code>api</code>) and specific view (<code>general_aviation_weather_view</code>). It does <strong>not</strong> grant access to other tables or schemas.</p>
</section>
<section id="create-a-dedicated-authenticator-role" class="slide level2">
<h2>Create a Dedicated Authenticator Role</h2>
<p>Rather than using the powerful <code>postgres</code> role to connect from PostgREST, we create a separate <strong>authenticator</strong> user that can assume the <code>web_anon</code> role. This is more secure and scalable.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><a></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> authenticator NOINHERIT LOGIN <span class="kw">PASSWORD</span> <span class="st">'&lt;your password&gt;'</span>;</span>
<span id="cb22-2"><a></a><span class="kw">GRANT</span> web_anon <span class="kw">TO</span> authenticator;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="why-this-matters">Why This Matters:</h3>
<ul>
<li><code>NOINHERIT</code>: the authenticator role <strong>cannot directly access</strong> anything.</li>
<li><code>LOGIN</code>: it can be used to log in from PostgREST.</li>
<li><code>GRANT web_anon</code>: allows this user to <strong>act as web_anon</strong>.</li>
</ul>
<p>üìö See <a href="https://docs.postgrest.org/en/v12/tutorials/tut0.html#step-3-create-database-for-api">PostgREST Tutorial, Step 3</a></p>
</section>
<section id="test-the-api-endpoint" class="slide level2">
<h2>Test the API Endpoint</h2>
<p>To test your PostgREST API:</p>
<ol type="1">
<li>Open your browser or use a tool like <code>curl</code>.</li>
<li>Visit your public API URL, appending the view name:</li>
</ol>
<pre><code>https://&lt;your-domain&gt;.up.railway.app/general_aviation_weather_view</code></pre>
<p>If everything is configured correctly, you should see a JSON response:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb24-1"><a></a><span class="ot">[</span></span>
<span id="cb24-2"><a></a>  <span class="fu">{</span></span>
<span id="cb24-3"><a></a>    <span class="dt">"timestamp"</span><span class="fu">:</span> <span class="st">"2025-04-08T16:00:00Z"</span><span class="fu">,</span></span>
<span id="cb24-4"><a></a>    <span class="dt">"callsign"</span><span class="fu">:</span> <span class="st">"N12345"</span><span class="fu">,</span></span>
<span id="cb24-5"><a></a>    <span class="dt">"altitude_meters"</span><span class="fu">:</span> <span class="dv">1524</span><span class="fu">,</span></span>
<span id="cb24-6"><a></a>    <span class="dt">"precipitation_mm"</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">8</span><span class="fu">,</span></span>
<span id="cb24-7"><a></a>    <span class="dt">"weathercode"</span><span class="fu">:</span> <span class="dv">61</span></span>
<span id="cb24-8"><a></a>  <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb24-9"><a></a>  <span class="er">...</span></span>
<span id="cb24-10"><a></a><span class="ot">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>‚úÖ If you see data, your DB API bridge is fully operational!</p>
</section>
<section id="summary" class="slide level2">
<h2>üéâ Summary</h2>
<ul>
<li>‚úÖ PostgREST converts your database views into REST endpoints.</li>
<li>‚úÖ You isolated access using a dedicated schema (<code>api</code>) and view.</li>
<li>‚úÖ You secured the system using PostgreSQL roles (<code>web_anon</code> and <code>authenticator</code>).</li>
<li>‚úÖ You can now integrate this endpoint with Swagger, frontend tools, or other systems.</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="setting-up-the-api-developer-portal-with-swagger-ui" class="title-slide slide level1 center">
<h1>Setting Up the API Developer Portal with Swagger UI</h1>

</section>
<section id="why-create-an-api-developer-portal" class="slide level2">
<h2>Why Create an API Developer Portal?</h2>
<p>Once your data is available through a RESTful interface (via PostgREST), the next step is to <strong>document</strong> it and make it easy for developers to discover and test. This is where <strong>Swagger UI</strong> comes in.</p>
<h3 id="what-is-swagger">What is Swagger?</h3>
<p><a href="https://swagger.io/tools/swagger-ui/">Swagger UI</a> is an open-source interface that visualizes APIs using the <strong>OpenAPI specification</strong>. It allows developers to: - üìñ Read documentation for your API endpoints. - üîé Explore input and output parameters. - üß™ Interactively test endpoints with live data. - ü§ù Share API functionality with frontend developers and integrators.</p>
<p>Swagger connects seamlessly with <strong>PostgREST</strong>, which automatically serves an OpenAPI schema that Swagger can consume.</p>
<p>üìö References: - <a href="https://swagger.io/tools/swagger-ui/">Swagger UI Docs</a> - <a href="https://postgrest.org/en/stable/api.html#openapi">PostgREST OpenAPI Support</a></p>
</section>
<section id="step-by-step-deploy-swagger-in-railway" class="slide level2">
<h2>Step-by-Step: Deploy Swagger in Railway</h2>
<h3 id="create-the-swagger-service">Create the Swagger Service</h3>
<ol type="1">
<li><p>In Railway, click <strong>Create</strong> ‚Üí <strong>New Service</strong>.</p></li>
<li><p>Select <strong>Docker Image</strong>.</p></li>
<li><p>Type in the image name:</p>
<pre><code>swaggerapi/swagger-ui</code></pre></li>
<li><p>Press <strong>Enter</strong>, then click <strong>Deploy</strong>.</p></li>
</ol>
</section>
<section class="slide level2">

<h3 id="add-the-api-url-environment-variable">Add the API URL Environment Variable</h3>
<p>Once the service is deployed:</p>
<ol type="1">
<li>Go to the <strong>Environment Variables</strong> tab.</li>
<li>Click <strong>New Variable</strong> and add:</li>
</ol>
<table class="caption-top">
<thead>
<tr class="header">
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>API_URL</code></td>
<td><code>${{postgrest.PGRST_OPENAPI_SERVER_PROXY_URI}}</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>‚úÖ This tells Swagger where to fetch the OpenAPI specification generated by PostgREST. It allows Swagger to automatically read and render your live API documentation.</p>
</blockquote>
</section>
<section class="slide level2">

<h3 id="redeploy-the-swagger-service">Redeploy the Swagger Service</h3>
<p>After setting the <code>API_URL</code> environment variable:</p>
<ol type="1">
<li>Click <strong>Deploy</strong> again to apply the change.</li>
</ol>
</section>
<section class="slide level2">

<h3 id="generate-a-public-url-for-swagger">Generate a Public URL for Swagger</h3>
<ol type="1">
<li>Navigate to the <strong>Settings</strong> tab of the Swagger service.</li>
<li>Under <strong>Networking</strong>, click <strong>Generate Domain</strong>.</li>
<li>Choose the <strong>default port: 8080</strong>.</li>
<li>Click <strong>Deploy</strong>.</li>
</ol>
<p>Once deployment is complete, a <strong>public URL</strong> will appear.</p>
</section>
<section id="test-the-swagger-ui" class="slide level2">
<h2>‚úÖ Test the Swagger UI</h2>
<p>Open the <strong>public URL</strong> you generated. If everything was configured correctly, you should see the <strong>Swagger UI</strong> load your API documentation automatically. You‚Äôll be able to:</p>
<ul>
<li>View your <code>general_aviation_weather_view</code> endpoint.</li>
<li>Click to expand and see parameters, response schema, and sample data.</li>
<li>Run test requests directly from the browser.</li>
</ul>
</section>
<section id="summary-1" class="slide level2">
<h2>üéâ Summary</h2>
<ul>
<li>‚úÖ Swagger UI provides a developer-friendly interface to your API.</li>
<li>‚úÖ It connects automatically to PostgREST using the OpenAPI spec.</li>
<li>‚úÖ Your live API is now self-documenting, testable, and ready to share.</li>
</ul>
<p>You now have a complete pipeline: <strong>data ingestion ‚Üí transformation ‚Üí structured storage ‚Üí API ‚Üí developer docs</strong>.</p>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/LucasCordova\.github\.io\/DataEngineering\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>